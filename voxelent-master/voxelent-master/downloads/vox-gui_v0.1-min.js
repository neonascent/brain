if(!$.ui){alert("vox-gui: jQuery UI is not loaded. Please include JQuery UI in your page")}if(!vxl){alert("vox-gui: Voxelent is not loaded!")}function vxlGUI(a){var b=vxl.events;vxl.go.notifier.subscribe([b.MODEL_NEW,b.MODELS_LOADING,b.MODELS_LOADED,],this);this.view=a;this.canvas=$("canvas#"+this.view.name);this.jqOverlay=undefined;this.jqProgressBar=undefined;this.jqMessage=undefined;this.count=0;this.loaded=0;this.createGUI()}vxlGUI.prototype.createGUI=function(){var a=document.createElement("div");
a.id=this.view.name+"-progressbar-container";a.style.position="absolute";a.style.width=this.canvas.width();a.style.height=this.canvas.height();a.style.top="4px";a.style.fontFamily="Arial, Helvetica";a.style.fontSize="13px";a.style.display="table-cell";a.style.verticalAlign="middle";a.style.textAlign="center";a.style.backgroundImage="url('http://voxelent.com/html/demos/css/img/vox-gui-logo.png')";a.style.backgroundRepeat="no-repeat";a.style.backgroundPosition="center "+Math.round(this.canvas.height()/3);
a.style.borderColor="#ccc";a.style.borderStyle="solid";a.style.borderWidth="1px";this.jqOverlay=$(a);var b=document.createElement("div");b.div=this.view.name+"-progressbar";b.style.position="relative";b.style.display="inline-block";b.style.textAlign="center";b.style.width="80%";b.style.height="25px";b.style.top=this.canvas.height()/2;this.jqProgressBar=$(b);var c=document.createElement("div");c.style.position="relative";c.style.textAlign="center";c.style.top=this.canvas.height()/2+20;this.jqMessage=$(c);
this.jqOverlay.append(this.jqProgressBar);this.jqOverlay.append(this.jqMessage)};vxlGUI.prototype.showOverlay=function(){this.canvas.hide();this.canvas.parent().append(this.jqOverlay)};vxlGUI.prototype.initProgressBar=function(a){this.count=a.toLoad.length;this.jqProgressBar.progressbar({value:0});this.jqMessage.html("<p>Loading...</p>")};vxlGUI.prototype.updateProgressBar=function(b){this.loaded=this.count-b.toLoad.length;var a=Math.round((1-(b.toLoad.length/this.count))*100);this.jqMessage.html("<p>Loading: "+this.loaded+" out of "+this.count+" ("+a+"%)</p>");
this.jqProgressBar.progressbar({value:a})};vxlGUI.prototype.hideOverlay=function(){this.jqProgressBar.progressbar({value:100});this.jqOverlay.fadeOut(300).hide();this.canvas.fadeIn(300)};vxlGUI.prototype.handleEvent=function(a,b){var c=vxl.events;switch(a){case c.MODELS_LOADING:this.showOverlay();this.initProgressBar(b);break;case c.MODEL_NEW:this.updateProgressBar(b);break;case c.MODELS_LOADED:this.hideOverlay(b);break}};